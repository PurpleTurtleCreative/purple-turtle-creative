document.querySelectorAll(".ptc-mailing-list-subscribe form").forEach(t=>{t.addEventListener("input",t=>{window.ptcTrackEvent("mailing_lists","form_start","subscribe_start")},{once:!0}),t.addEventListener("submit",async e=>{e.preventDefault(),window.ptcTrackEvent("mailing_lists","form_submit","subscribe_submit");const s=t.closest(".ptc-mailing-list-subscribe");s.innerHTML='<p class="ptc-form-loader">Processing...</p>';const n=new window.FormData(t),i={method:t.method,body:n};await window.fetch(t.action,i).then(t=>t.json()).then(t=>{if(!("message"in t&&t.message&&"status"in t&&t.status))throw"Bad response";if(t.status>=400){let e="warning";t.status>=500&&(e="danger"),s.innerHTML=`\n\t\t\t\t\t\t\t\t<div class="ptc-form-response">\n\t\t\t\t\t\t\t\t\t<p>${t.message}</p>\n\t\t\t\t\t\t\t\t\t<p>For assistance, please email <a href="mailto:michelle@purpleturtlecreative.com">michelle@purpleturtlecreative.com</a>.</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t`,s.classList.add(`banner-${e}`),window.ptcTrackEvent("mailing_lists","form_submit","subscribe_error")}else s.innerHTML=`\n\t\t\t\t\t\t\t\t<div class="ptc-form-response">\n\t\t\t\t\t\t\t\t\t<p>${t.message}</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t`,s.classList.add("banner-success"),window.ptcTrackEvent("mailing_lists","form_submit","subscribe_success")}).catch(t=>{s.innerHTML='\n\t\t\t\t\t\t<div class="ptc-form-response">\n\t\t\t\t\t\t\t<p>Your request failed to submit, so it could not be processed. Please check your Internet connection, <a href="javascript:document.location.reload()">refresh the page</a>, and try again.</p>\n\t\t\t\t\t\t\t<p>For assistance, please email <a href="mailto:michelle@purpleturtlecreative.com">michelle@purpleturtlecreative.com</a>.</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t',s.classList.add("banner-danger"),window.ptcTrackEvent("mailing_lists","form_submit","subscribe_exception"),window.console.error(t)})})});
//# sourceMappingURL=block_mailing-list-subscribe.min.js.map