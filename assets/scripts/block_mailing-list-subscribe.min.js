document.querySelectorAll(".ptc-mailing-list-subscribe form").forEach(t=>{let e="unknown";t.dataset.label&&(e=t.dataset.label),t.addEventListener("input",t=>{window.ptcTrackEvent("mailing_lists","subscribe_start",e)},{once:!0}),t.addEventListener("submit",async s=>{s.preventDefault(),window.ptcTrackEvent("mailing_lists","subscribe_submit",e);const n=t.closest(".ptc-mailing-list-subscribe"),i=new window.FormData(t);try{window.turnstile.remove(n.querySelector(".cf-turnstile iframe").getAttribute("id"))}catch(t){window.console.error(t)}n.innerHTML='<p class="ptc-form-loader">Processing...</p>';const a={method:t.method,body:i};await window.fetch(t.action,a).then(t=>t.json()).then(t=>{if(!("message"in t&&t.message&&"status"in t&&t.status))throw"Bad response";if(t.status>=400){let s="warning";t.status>=500&&(s="danger"),n.innerHTML=`\n\t\t\t\t\t\t\t\t<div class="ptc-form-response">\n\t\t\t\t\t\t\t\t\t<p>${t.message}</p>\n\t\t\t\t\t\t\t\t\t<p>For assistance, please email <a href="mailto:michelle@purpleturtlecreative.com">michelle@purpleturtlecreative.com</a>.</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t`,n.classList.add(`banner-${s}`),window.ptcTrackEvent("mailing_lists","subscribe_error",e)}else n.innerHTML=`\n\t\t\t\t\t\t\t\t<div class="ptc-form-response">\n\t\t\t\t\t\t\t\t\t<p>${t.message}</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t`,n.classList.add("banner-success"),window.ptcTrackEvent("mailing_lists","subscribe_success",e)}).catch(t=>{n.innerHTML='\n\t\t\t\t\t\t<div class="ptc-form-response">\n\t\t\t\t\t\t\t<p>Your request failed to submit, so it could not be processed. Please check your Internet connection, <a href="javascript:document.location.reload()">refresh the page</a>, and try again.</p>\n\t\t\t\t\t\t\t<p>For assistance, please email <a href="mailto:michelle@purpleturtlecreative.com">michelle@purpleturtlecreative.com</a>.</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t',n.classList.add("banner-danger"),window.ptcTrackEvent("mailing_lists","subscribe_exception",e),window.console.error(t)})})});
//# sourceMappingURL=block_mailing-list-subscribe.min.js.map