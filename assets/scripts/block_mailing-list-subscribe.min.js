document.querySelectorAll(".ptc-mailing-list-subscribe form").forEach(t=>{window.console.log("found subscribe form",t),t.addEventListener("submit",async e=>{e.preventDefault(),window.ptcTrackEvent("mailing_lists","subscribe_form_submit","form_submit");const s=t.closest(".ptc-mailing-list-subscribe");s.innerHTML='<p class="ptc-form-loader">Processing...</p>';const i=new window.FormData(t),n={method:t.method,body:i};await window.fetch(t.action,n).then(t=>t.json()).then(t=>{if(!("message"in t&&t.message&&"status"in t&&t.status))throw"Bad response";if(t.status>=400){let e="warning";t.status>=500&&(e="danger"),s.innerHTML=`\n\t\t\t\t\t\t\t\t<div class="ptc-form-response">\n\t\t\t\t\t\t\t\t\t<p>${t.message}</p>\n\t\t\t\t\t\t\t\t\t<p>For assistance, please email <a href="mailto:michelle@purpleturtlecreative.com">michelle@purpleturtlecreative.com</a>.</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t`,s.classList.add(`banner-${e}`),window.ptcTrackEvent("mailing_lists","subscribe_form_submit","form_submit_error")}else s.innerHTML=`\n\t\t\t\t\t\t\t\t<div class="ptc-form-response">\n\t\t\t\t\t\t\t\t\t<p>${t.message}</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t`,s.classList.add("banner-success"),window.ptcTrackEvent("mailing_lists","subscribe_form_submit","form_submit_success")}).catch(t=>{s.innerHTML=`\n\t\t\t\t\t\t<div class="ptc-form-response">\n\t\t\t\t\t\t\t<p>Your request failed to submit, so it could not be processed. Please check your Internet connection, <a href="${window.location.toString()}">refresh the page</a>, and try again.</p>\n\t\t\t\t\t\t\t<p>For assistance, please email <a href="mailto:michelle@purpleturtlecreative.com">michelle@purpleturtlecreative.com</a>.</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`,s.classList.add("banner-danger"),window.ptcTrackEvent("mailing_lists","subscribe_form_submit","form_submit_exception"),window.console.error(t)})})});
//# sourceMappingURL=block_mailing-list-subscribe.min.js.map